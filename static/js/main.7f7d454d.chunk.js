(this["webpackJsonpreact-map-app"]=this["webpackJsonpreact-map-app"]||[]).push([[0],{27:function(e,t,r){},50:function(e,t,r){"use strict";r.r(t);var n=r(1),o=r.n(n),c=r(21),i=r.n(c),a=(r(27),r(2)),s=r(9),u=r(4),l=r(5),p=r.n(l),f=r(0),j=function(e){var t=e.geojson;return Object(f.jsxs)("ul",{className:"table",children:[Object(f.jsxs)("li",{children:["Total: ",t.features.length]}),Object(f.jsxs)("li",{children:["Five: ",t.features.filter((function(e){return 5===e.properties.score})).length]}),Object(f.jsxs)("li",{children:["Four: ",t.features.filter((function(e){return 4===e.properties.score})).length]}),Object(f.jsxs)("li",{children:["Three:",t.features.filter((function(e){return 3===e.properties.score})).length]}),Object(f.jsxs)("li",{children:["Two: ",t.features.filter((function(e){return 2===e.properties.score})).length]}),Object(f.jsxs)("li",{children:["One: ",t.features.filter((function(e){return 1===e.properties.score})).length]}),Object(f.jsxs)("li",{children:["Zero: ",t.features.filter((function(e){return 0===e.properties.score})).length]})]})},d=r(22),b=r.n(d);var m=function(e){var t=e.geojson,r=e.upload,o=Object(n.useState)(null),c=Object(u.a)(o,2),i=c[0],a=c[1];return Object(f.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault();var t=new FileReader;i&&(t.readAsText(i),t.onload=function(){var e=JSON.parse(t.result);r(e)})},children:[Object(f.jsx)("input",{type:"file",accept:".json",multiple:!1,onChange:function(e){return a(e.target.files[0])}}),Object(f.jsx)("input",{type:"submit"}),Object(f.jsx)(b.a,{style:{margin:"0 10px"},label:"Export",filename:"geojson.json",tagName:"button",exportFile:function(){return JSON.stringify(t)}})]})},g=function(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null),r=Object(n.useState)([]),o=Object(u.a)(r,2),c=o[0],i=o[1],l={0:"black",1:"gray",2:"red",3:"orange",4:"lime",5:"green"},d=Object(n.useState)({type:"FeatureCollection",features:[{type:"Feature",properties:{markerColor:"grey","marker-size":"medium","marker-symbol":"",score:1,id:123},geometry:{type:"Point",coordinates:[24.121856689453125,49.93973135157948]}},{type:"Feature",properties:{markerColor:"red","marker-size":"medium","marker-symbol":"",score:2,id:124},geometry:{type:"Point",coordinates:[24.224853515625,49.7768301343366]}}]}),b=Object(u.a)(d,2),g=b[0],O=b[1],h=function(e){var t={type:"Feature",properties:{markerColor:"black",score:0,id:Date.now()},geometry:{type:"Point",coordinates:[e.lngLat.lng,e.lngLat.lat]}};O((function(e){return Object(a.a)(Object(a.a)({},e),{},{features:[].concat(Object(s.a)(e.features),[t])})}))},v=function(e){O((function(t){var r=t.features.filter((function(t){return t.properties.id!==e}));return Object(a.a)(Object(a.a)({},t),{},{features:Object(s.a)(r)})}))},y=function(e,t){O((function(r){return Object(a.a)(Object(a.a)({},r),{},{features:r.features.map((function(r){return r.properties.id===t&&(r.properties.score=+e.value,r.properties.markerColor=l[e.value]),r}))})}))},x=function(e,t){O((function(r){return Object(a.a)(Object(a.a)({},r),{},{features:r.features.map((function(r){return r.properties.id===e&&(r.geometry.coordinates=t.getLngLat()),r}))})}))},k=function(){i([]),c.forEach((function(e){return e.remove()})),g.features.map((function(e){return function(e){var r=new p.a.Popup({offset:30}).setHTML('\n    <select>\n      <option value="0">0</option>\n      <option value="1">1</option>\n      <option value="2">2</option>\n      <option value="3">3</option>\n      <option value="4">4</option>\n      <option value="5">5</option>\n    </select>\n    <button>Delete</button>\n'),n=new p.a.Marker({color:e.properties.markerColor,draggable:!0}).setLngLat(e.geometry.coordinates).setPopup(r).addTo(t.current);n.on("dragend",(function(){return x(e.properties.id,n)})),n.getElement().addEventListener("click",(function(t){if(n.togglePopup(),r.isOpen()){r.getElement().children[1].children[1].addEventListener("click",(function(){return v(e.properties.id)}));var o=r.getElement().children[1].children[0];o.value=e.properties.score,o.addEventListener("change",(function(){return y(o,e.properties.id)}))}t.stopPropagation()})),i((function(e){return[].concat(Object(s.a)(e),[n])}))}(e)}))};return Object(n.useEffect)((function(){return p.a.accessToken="pk.eyJ1IjoiNWhhbWVsZTU1IiwiYSI6ImNrdm0yeXN1dTB2aGcyeG91bjl0YzVsZTUifQ.2KMwF-DnCJaK8VOj9OcHkg",void(t.current||(t.current=new p.a.Map({container:e.current,style:"mapbox://styles/mapbox/streets-v11",center:[24.039269,49.848178],zoom:9}),t.current.on("load",(function(){t.current.addSource("markers",{type:"geojson",data:g}),t.current.on("click",(function(e){return h(e)}))}))))})),Object(n.useEffect)((function(){return k()}),[g]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{ref:e,className:"map"}),Object(f.jsx)(j,{geojson:g}),Object(f.jsx)(m,{geojson:g,upload:function(e){return O(e)}})]})};var O=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(g,{})})},h=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,51)).then((function(t){var r=t.getCLS,n=t.getFID,o=t.getFCP,c=t.getLCP,i=t.getTTFB;r(e),n(e),o(e),c(e),i(e)}))};r(49);i.a.render(Object(f.jsx)(o.a.StrictMode,{children:Object(f.jsx)(O,{})}),document.getElementById("root")),h()}},[[50,1,2]]]);
//# sourceMappingURL=main.7f7d454d.chunk.js.map